{
  "$schema": "./skill_manifest_schema_v2.0.0.json",
  "manifestApiVersion": "v2.0.0",
  "manifestId": "skill.calculate.pricing@0.1.0",
  "skillName": "calculate.pricing",
  "skillVersion": "0.1.0",
  "description": "Calculates order totals including taxes, discounts, and shipping",
  "tags": [
    "calculation",
    "pricing",
    "testing",
    "phase-1"
  ],
  "permissions": {
    "egress": "intranet",
    "secrets": []
  },
  "skillDirectives": "You are a pricing calculation specialist. Your task is to compute final order totals.\n\n## Calculation Steps\n1. Use `pricing:calculate_subtotal` to sum item prices\n2. Use `pricing:apply_discount` to apply any discount codes\n3. Use `pricing:calculate_tax` to compute taxes based on shipping address\n4. Use `pricing:calculate_shipping` to determine shipping costs\n\n## Output Format\nReturn a pricing breakdown with:\n- `subtotal`: sum of item prices before discounts\n- `discount_amount`: discount value applied\n- `tax_amount`: calculated tax\n- `shipping_amount`: shipping cost\n- `total`: final order total\n- `currency`: \"USD\"\n- `line_items`: itemized list with quantities and prices\n",
  "tools": [
    {
      "definition": {
        "type": "mcp_server",
        "serverId": "pricing",
        "toolName": "calculate_subtotal"
      },
      "json_schema": {
        "type": "object",
        "properties": {
          "items": {
            "type": "array",
            "description": "Order items with quantity and unit_price",
            "items": {
              "type": "object",
              "properties": {
                "sku": {
                  "type": "string"
                },
                "quantity": {
                  "type": "integer"
                },
                "unit_price": {
                  "type": "number"
                }
              },
              "required": [
                "sku",
                "quantity",
                "unit_price"
              ]
            }
          }
        },
        "required": [
          "items"
        ]
      }
    },
    {
      "definition": {
        "type": "mcp_server",
        "serverId": "pricing",
        "toolName": "apply_discount"
      },
      "json_schema": {
        "type": "object",
        "properties": {
          "subtotal": {
            "type": "number"
          },
          "discount_code": {
            "type": "string"
          }
        },
        "required": [
          "subtotal"
        ]
      }
    },
    {
      "definition": {
        "type": "mcp_server",
        "serverId": "pricing",
        "toolName": "calculate_tax"
      },
      "json_schema": {
        "type": "object",
        "properties": {
          "subtotal": {
            "type": "number"
          },
          "state": {
            "type": "string"
          }
        },
        "required": [
          "subtotal",
          "state"
        ]
      }
    },
    {
      "definition": {
        "type": "mcp_server",
        "serverId": "pricing",
        "toolName": "calculate_shipping"
      },
      "json_schema": {
        "type": "object",
        "properties": {
          "item_count": {
            "type": "integer"
          },
          "delivery_zone": {
            "type": "string"
          }
        },
        "required": [
          "item_count",
          "delivery_zone"
        ]
      }
    }
  ],
  "dataSources": [
    {
      "id": "pricing",
      "description": "Context about pricing calculation capabilities",
      "content": {
        "type": "text_content",
        "text": "Pricing tools compute order totals with support for percentage and\nfixed discounts, state-based tax rates, and zone-based shipping costs.\n"
      }
    }
  ]
}